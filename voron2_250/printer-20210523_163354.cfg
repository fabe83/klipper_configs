#####################################################################
# 	MCU & Printer Settings
#####################################################################
[mcu]
serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.3:1.0

[mcu z]
serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.4:1.0

[mcu rpi]
serial: /tmp/klipper_host_mcu

[printer]
kinematics: corexy
max_velocity: 300  
max_accel: 3000    			#Max 4000
max_z_velocity: 15 			#Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350   			#Max ?
square_corner_velocity: 5.0  #Can experiment with 8.0, default 5.0
# for ressance testing
#max_accel: 7000
#max_accel_to_decel: 7000

[input_shaper]

[temperature_sensor raspberry_pi]
sensor_type: rpi_temperature
min_temp: 10
max_temp: 100

[adxl345]
cs_pin: rpi:None

[resonance_tester]
accel_chip: adxl345
probe_points:
    150,150,20

[idle_timeout]
timeout: 3600
gcode:
	TURN_OFF_HEATERS

#####################################################################
# 	Probe
#####################################################################
[probe]
##	Inductive Probe
##	This probe is not used for Z height, only Quad Gantry Leveling
##	Z_MAX on mcu_z
##	If your probe is NO instead of NC, add change pin to !z:P1.24
pin: z:P1.24
x_offset: 0
y_offset: 25.0
z_offset: 0
speed: 10.0
samples: 3
samples_result: median
sample_retract_dist: 3.0
samples_tolerance: 0.006
samples_tolerance_retries: 3


#####################################################################
# 	Bed Heater
#####################################################################
[heater_bed]
##	SSR Pin - Z board, Fan Pin
heater_pin: z:P2.3
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: z:P0.23
##	Adjust Max Power so your heater doesn't warp your bed
max_power: 0.75
min_temp: 0
max_temp: 120
#control: pid
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769

#####################################################################
# 	Homing and Gantry Adjustment Routines
#####################################################################
[safe_z_home]
home_xy_position: 181,250
speed: 50.0
z_hop: 10
z_hop_speed: 20.0
move_to_previous: False

[quad_gantry_level]
##	Use QUAD_GANTRY_LEVEL to level a gantry.
##	Min & Max gantry corners - measure from nozzle at MIN (0,0) and 
##	MAX (250, 250), (300,300), or (350,350) depending on your printer size
##	to respective belt positions
#--------------------------------------------------------------------
gantry_corners:
	-60,-10
	310, 320
points:
	50,25
	50,175
	200,175
	200,25
speed: 100
horizontal_move_z: 5
retries: 5
retry_tolerance: 0.005
max_adjust: 7

[bed_mesh]
speed: 150
horizontal_move_z: 5
mesh_min: 30,30
mesh_max: 220,220
probe_count: 5,5
fade_start: 1
fade_end: 10
fade_target: 0
move_check_distance: 3.0
mesh_pps: 2,2
algorithm: lagrange #bicubic
relative_reference_index: 12


[include extruder.cfg]
[include stepper.cfg]
[include fans.cfg]
[include mainsail.cfg]
[include display.cfg]
[include macros.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 29.805
#*# pid_ki = 2.233
#*# pid_kd = 99.475
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 41.622
#*# pid_ki = 2.569
#*# pid_kd = 168.568
#*#
#*# [input_shaper]
#*# shaper_type_x = 3hump_ei
#*# shaper_freq_x = 66.6
#*# shaper_type_y = 3hump_ei
#*# shaper_freq_y = 59.2
#*#
#*# [stepper_z]
#*# position_endstop = 2.420
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.030000, -0.012500, -0.002500, 0.012500, 0.002500
#*# 	  0.040000, -0.002500, -0.005000, 0.015000, 0.027500
#*# 	  0.032500, -0.000000, 0.000000, 0.017500, 0.007500
#*# 	  0.022500, -0.025000, -0.027500, -0.007500, -0.002500
#*# 	  0.030000, 0.002500, -0.010000, 0.010000, 0.007500
#*# tension = 0.2
#*# min_x = 30.0
#*# algo = lagrange
#*# y_count = 5
#*# mesh_y_pps = 2
#*# min_y = 30.0
#*# x_count = 5
#*# max_y = 220.0
#*# mesh_x_pps = 2
#*# max_x = 220.0
#*#
#*# [bed_mesh 100]
#*# version = 1
#*# points =
#*# 	0.017500, -0.017500, -0.012500, 0.010000, 0.002500
#*# 	0.030000, 0.002500, -0.005000, 0.017500, 0.022500
#*# 	0.025000, -0.000000, 0.000000, 0.022500, 0.007500
#*# 	0.017500, -0.020000, -0.025000, -0.002500, -0.002500
#*# 	0.020000, -0.002500, -0.007500, 0.010000, 0.005000
#*# tension = 0.2
#*# min_x = 30.0
#*# algo = lagrange
#*# y_count = 5
#*# mesh_y_pps = 2
#*# min_y = 30.0
#*# x_count = 5
#*# max_y = 220.0
#*# mesh_x_pps = 2
#*# max_x = 220.0
#*#
#*# [bed_mesh 60]
#*# version = 1
#*# points =
#*# 	0.027500, -0.017500, -0.010000, 0.010000, 0.015000
#*# 	0.040000, -0.000000, -0.007500, 0.010000, 0.022500
#*# 	0.030000, -0.005000, 0.000000, 0.020000, 0.007500
#*# 	0.032500, -0.007500, -0.017500, 0.002500, 0.005000
#*# 	0.052500, 0.022500, 0.022500, 0.035000, 0.032500
#*# tension = 0.2
#*# min_x = 30.0
#*# algo = lagrange
#*# y_count = 5
#*# mesh_y_pps = 2
#*# min_y = 30.0
#*# x_count = 5
#*# max_y = 220.0
#*# mesh_x_pps = 2
#*# max_x = 220.0
#*#
#*# [bed_mesh 90]
#*# version = 1
#*# points =
#*# 	  0.030000, -0.012500, -0.002500, 0.012500, 0.002500
#*# 	  0.040000, -0.002500, -0.005000, 0.015000, 0.027500
#*# 	  0.032500, -0.000000, 0.000000, 0.017500, 0.007500
#*# 	  0.022500, -0.025000, -0.027500, -0.007500, -0.002500
#*# 	  0.030000, 0.002500, -0.010000, 0.010000, 0.007500
#*# tension = 0.2
#*# min_x = 30.0
#*# algo = lagrange
#*# y_count = 5
#*# mesh_y_pps = 2
#*# min_y = 30.0
#*# x_count = 5
#*# max_y = 220.0
#*# mesh_x_pps = 2
#*# max_x = 220.0
